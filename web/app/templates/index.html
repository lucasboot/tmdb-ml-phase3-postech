{% extends 'base.html' %}
{% block content %}
<h1>🎬 TMDB Dashboard - Análise de Filmes de Terror com ML</h1>
<p><small>Polling automático a cada {{ poll_ms/1000|int }}s</small></p>

<section>
  <h2>👻 1️⃣ Regressão - Predição de Popularidade de Filmes de Terror</h2>
  <p><small>Modelagem da popularidade usando RandomForestRegressor com base em características como duração, ano de lançamento, mês e gêneros.</small></p>
  
  <div class="grid">
    <article>
      <h3>📊 Plot 1 - Importância das Variáveis (Feature Importance)</h3>
      <p><small>Mostra quais fatores mais influenciam a popularidade dos filmes de terror.</small></p>
      <canvas id="chartFeatureImportance"></canvas>
      <details>
        <summary>Ver métricas</summary>
        <table id="tblRegressionMetrics">
          <tbody></tbody>
        </table>
      </details>
    </article>
    
    <article>
      <h3>📈 Plot 2 - Real vs Previsto</h3>
      <p><small>Avalia a qualidade da regressão. Pontos próximos à diagonal indicam boa previsão.</small></p>
      <canvas id="chartRealVsPredicted"></canvas>
    </article>
  </div>
</section>

<section>
  <h2>🎯 2️⃣ Classificação - Prever se um Filme de Terror será Bem Avaliado</h2>
  <p><small>Prevê se um filme será acima da mediana de avaliação usando RandomForestClassifier.</small></p>
  
  <div class="grid">
    <article>
      <h3>🔍 Plot 3 - Matriz de Confusão</h3>
      <p><small>Mostra acertos e erros da predição (Alta/Baixa avaliação).</small></p>
      <canvas id="chartConfusionMatrix"></canvas>
    </article>
    
    <article>
      <h3>📉 Plot 4 - Curva ROC</h3>
      <p><small>Mede a capacidade discriminante do modelo. AUC próximo de 1.0 indica excelente desempenho.</small></p>
      <canvas id="chartROC"></canvas>
      <details>
        <summary>Ver métricas</summary>
        <table id="tblClassificationMetrics">
          <tbody></tbody>
        </table>
      </details>
    </article>
  </div>
</section>

<section>
  <h2>🕸️ 3️⃣ Clustering - Descobrir Subtipos de Filmes de Terror</h2>
  <p><small>Agrupa filmes com características parecidas usando KMeans (ex: gore, psicológico, paranormal).</small></p>
  
  <div class="grid">
    <article>
      <h3>🗺️ Plot 5 - PCA 2D dos Clusters</h3>
      <p><small>Visualização em 2D dos grupos de filmes de terror identificados pelo algoritmo.</small></p>
      <canvas id="chartPCA"></canvas>
    </article>
    
    <article>
      <h3>📊 Plot 6 - Perfil Médio por Cluster</h3>
      <p><small>Estatísticas médias de cada grupo (popularidade, avaliação, duração).</small></p>
      <canvas id="chartClusterProfiles"></canvas>
    </article>
  </div>
</section>

{% endblock %}
